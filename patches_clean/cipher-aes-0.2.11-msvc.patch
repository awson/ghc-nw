diff -urN cipher-aes-0.2.11/cbits/bitfn.h cipher-aes-0.2.11p/cbits/bitfn.h
--- cipher-aes-0.2.11/cbits/bitfn.h	2015-06-21 15:13:51.000000000 +0300
+++ cipher-aes-0.2.11p/cbits/bitfn.h	2017-11-28 10:42:11.975711500 +0300
@@ -158,13 +158,13 @@
 }
 #endif
 
-#ifdef __GNUC__
+#if defined __GNUC__ || defined __clang__
 #define bitfn_ntz(n) __builtin_ctz(n)
 #else
 #error "define ntz for your platform"
 #endif
 
-#ifdef __MINGW32__
+#if defined __MINGW32__ || defined _MSC_VER
   # define LITTLE_ENDIAN 1234
   # define BYTE_ORDER    LITTLE_ENDIAN
 #elif defined(__FreeBSD__) || defined(__DragonFly__) || defined(__NetBSD__)
